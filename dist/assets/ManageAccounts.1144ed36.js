import{r as a,j as o,a as e,b as E,c as Q,R as W,H as X,z as Z,f as N,L as D}from"./index.a05e5750.js";import{T as ee,a as ne}from"./Table.1447f8c1.js";import{F as te,d as oe}from"./Add.57688a11.js";import{u as H}from"./useHTTP.b23999b0.js";import{I as ce}from"./IconButton.805b2d54.js";import{u as ae}from"./useDispatch.4fe1ca73.js";import"./Backdrop.435115f8.js";const se="_loading_1o24z_1",re="_error_1o24z_8",le="_container_1o24z_14",z={loading:se,error:re,container:le},ie="_form_b8zff_1",de="_inputs_b8zff_17",ue="_readonly_b8zff_22",me="_checkbox_b8zff_39",he="_actions_b8zff_47",k={form:ie,inputs:de,readonly:ue,checkbox:me,actions:he},be=({data:t,header:l,loading:s,error:g,onSave:r,onCancel:p})=>{const[m,C]=a.exports.useState(t.account_no),[A,f]=a.exports.useState(t.bank_name),[h,S]=a.exports.useState(t.active==="Yes"),[b,_]=a.exports.useState(t.joint==="Yes"),c=v=>{_(v.target.checked)},F=v=>{v.preventDefault(),r(t.id,b)};return o("form",{className:k.form,onSubmit:F,children:[o("div",{className:k.inputs,children:[o("div",{className:k.readonly,children:[e("label",{htmlFor:"account_no",children:"Account#"}),e("input",{id:"account_no",readOnly:!0,value:m})]}),o("div",{className:k.readonly,children:[e("label",{htmlFor:"bank_name",children:"Bank Name"}),e("input",{id:"bank_name",readOnly:!0,value:A})]})]}),o("div",{className:k.checkbox,children:[o("div",{children:[e("input",{type:"checkbox",defaultChecked:h,disabled:!0}),e("label",{children:"Active"})]}),o("div",{onClick:c,children:[e("input",{type:"checkbox",checked:b,onChange:c}),e("label",{children:"Joint"})]})]}),o("div",{className:k.actions,children:[e("button",{type:"button",onClick:p,children:"Cancel"}),e("button",{type:"submit",children:s?"Saving...":"Save Changes"})]}),g&&e("p",{children:props.error})]})},_e="_form_1wk2u_1",pe="_message_1wk2u_10",fe="_actions_1wk2u_16",B={form:_e,message:pe,actions:fe,"imp-button":"_imp-button_1wk2u_36"},ke=t=>o("form",{onSubmit:s=>{s.preventDefault(),t.onDelete(t.account.id)},className:B.form,children:[o("div",{children:[o("p",{children:["Account# ",t.account.account_no," will be deleted!"]}),e("p",{className:B.message,children:" Do you want to proceed?"})]}),o("div",{className:B.actions,children:[e("button",{type:"button",onClick:t.onCancel,children:"Cancel"}),e("button",{type:"submit",className:B["imp-button"],children:t.loading?"Deleting...":"Confirm Delete"})]})]}),ge="_form_mwd1w_1",Ce="_inputs_mwd1w_17",Ae="_readonly_mwd1w_22",ve="_checkbox_mwd1w_56",ye="_actions_mwd1w_64",x={form:ge,inputs:Ce,readonly:Ae,checkbox:ve,actions:ye},Ne=t=>e("option",{value:t.id,children:t.bank_name},t.id),xe=t=>{const l=E(c=>c.banks.banks),[s,g]=a.exports.useState(0),[r,p]=a.exports.useState(""),[m,C]=a.exports.useState(!1),[A,f]=a.exports.useState(null),h=c=>{g(c.target.value)},S=c=>{C(c.target.checked)},b=c=>{p(c.target.value)},_=c=>{if(c.preventDefault(),r.length===0){f("Account Number cannot be blank");return}if(s===0){f("Please sent a Bank");return}f(null),t.onCreate(s,r,m)};return o("form",{className:x.form,onSubmit:_,children:[o("div",{className:x.readonly,children:[e("label",{children:"Account#"}),e("input",{type:"text",onChange:b,value:r})]}),o("div",{className:x.readonly,children:[e("label",{htmlFor:"bank_name",children:"Bank Name"}),o("select",{id:"bank_name",value:s,onChange:h,children:[e("option",{value:0,children:"---"}),l.map(Ne)]})]}),e("div",{className:x.checkbox,children:o("div",{children:[e("input",{type:"checkbox",checked:m,onChange:S}),e("label",{children:"Joint"})]})}),o("div",{className:x.actions,children:[e("button",{type:"button",onClick:t.onCancel,children:"Cancel"}),e("button",{type:"submit",children:t.loading?"Creating...":"Create Account"})]}),t.error&&e("p",{children:t.error})]})},M=[{name:"Account#",tech_name:"account_no"},{name:"Bank",tech_name:"bank_name"},{name:"Active",tech_name:"active"},{name:"Joint",tech_name:"joint"}],Fe=t=>{const l=E(n=>n.userAuth.authToken),s=E(n=>n.userAccounts.userAccounts),g=E(n=>n.formModal.showModal),r=ae(),[p,m]=a.exports.useState({}),[C,A]=a.exports.useState({}),[f,h]=a.exports.useState(!1),S=a.exports.useCallback(n=>{const i=[];for(let d in n){const u={};u.id=n[d].account_id,u.account_no=n[d].account_no,u.active=n[d].active?"Yes":"No",u.joint=n[d].joint?"Yes":"No",u.bank_name=n[d].bank_dets.bank_name,i.push(u)}r(Q.setUserAccounts({accounts:i}))},[]),{isloading:b,error:_,sendRequest:c,resetError:F}=H(S);a.exports.useEffect(()=>{if(s.length===0){const n={url:N+"/accounts",headers:{Authorization:"Bearer "+l}};c(n)}},[l,c,s]);const v=n=>{m(n),r(D.showModal())},T=n=>{A(n),r(D.showModal())},y=()=>{A({}),m({}),h(!1),r(D.hideModal())};let w;b&&(w=e("p",{className:z.loading,children:"Loading...."})),_&&(w=e("p",{className:z.error,children:_})),!b&&!_&&s&&(w=e(ne,{header:M,body:s,editable:!0,onEdit:v,toDelete:!0,onDelete:T}));const j=a.exports.useCallback(n=>{const i={url:N+"/accounts",headers:{Authorization:"Bearer "+l}};c(i),y()},[]),{isloading:R,error:$,sendRequest:J,resetError:Se}=H(j),q=(n,i)=>{const d={url:N+"/accounts/"+n,method:"PUT",body:{joint:i},headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};J(d)},{isloading:I,error:L,sendRequest:O}=H(j),P=n=>{const i={url:N+"/accounts/"+n,method:"DELETE",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};O(i)},U=()=>{h(!0),r(D.showModal())},{isloading:Y,error:V,sendRequest:G}=H(j),K=(n,i,d)=>{const u={url:N+"/accounts",method:"POST",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},body:{joint:d,bank:n,account_no:i}};G(u),h(!1)};return o(W.Fragment,{children:[g&&o(te,{onBackdropClick:y,children:[Object.keys(p).length>0&&e(be,{data:p,header:M,onCancel:y,onSave:q,loading:R,error:$}),Object.keys(C).length>0&&e(ke,{account:C,onCancel:y,onDelete:P,loading:I,error:L}),f&&e(xe,{onCancel:y,onCreate:K,loading:Y,error:V})]}),o(X,{children:["My Accounts",e(ee,{title:"Add New Account",placement:"top-start",arrow:!0,children:e(ce,{color:"primary","aria-label":"add",onClick:U,children:e(oe,{})})})]}),e(Z,{className:z.container,children:w})]})};export{Fe as default};
