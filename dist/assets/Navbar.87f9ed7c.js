import{j as r,a as t,N as s,B as x,R as k,u as z,b as c,r as l,c as M,d as y,e as E,f as H}from"./index.a05e5750.js";import{u as R}from"./useHTTP.b23999b0.js";import{r as j,i as q,a as D,I as T}from"./IconButton.805b2d54.js";import{B as $}from"./Backdrop.435115f8.js";import{u as O}from"./useDispatch.4fe1ca73.js";const F="_header_w3piz_1",P="_navbar_w3piz_17",V="_sidebar_w3piz_26",G="_hamburger_w3piz_58",J="_active_w3piz_90",K="_logout_w3piz_94",n={header:F,navbar:P,sidebar:V,hamburger:G,active:J,logout:K},Q="_logout_m4dt1_1",W={logout:Q},B=e=>{const i=()=>{e.logoutHandler(),"hideSideBar"in e&&e.hideSideBar()};return r("nav",{className:e.className,children:[r("ul",{children:[t("li",{children:t(s,{to:"/",onClick:e.hideSideBar,children:"Home"})}),!e.isUserLoggedIn&&t("li",{children:t(s,{to:"/login",onClick:e.hideSideBar,children:"Login"})}),e.isUserLoggedIn&&t("li",{children:t(s,{to:"/spendanalysis",onClick:e.hideSideBar,children:"Spend Analysis"})}),e.isUserLoggedIn&&t("li",{children:t(s,{to:"/manageaccount",onClick:e.hideSideBar,children:"Manage Accounts"})}),e.isUserLoggedIn&&t("li",{children:t(s,{to:"/uploadstatement",onClick:e.hideSideBar,children:"Upload Statement"})}),e.isUserLoggedIn&&e.isUserAdmin&&t("li",{children:t(s,{to:"/addbank",onClick:e.hideSideBar,children:"Add Bank Details"})})]}),e.isUserLoggedIn&&t(x,{className:W.logout,onClick:i,children:e.buttonText})]})};var u={},X=q.exports;Object.defineProperty(u,"__esModule",{value:!0});var L=u.default=void 0,Y=X(j()),Z=D,p=(0,Y.default)((0,Z.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");L=u.default=p;const ee={"sidebar-show":"_sidebar-show_1hqv8_1"},te=e=>r(k.Fragment,{children:[t($,{onClick:e.hideSideBar}),t("div",{className:ee["sidebar-show"],children:e.children})]}),ne=e=>{const i=O(),h=z(),g=c(a=>a.userAuth.userLoggedIn),A=c(a=>a.userAuth.authToken),m=c(a=>a.userAuth.userIsAdmin),[U,_]=l.exports.useState(!1),I=()=>{_(!0)},v=()=>{_(!1)},b=()=>{i(M.resetUserAccounts()),i(y.resetBanks()),i(E.logUserOut())},C=l.exports.useCallback(a=>{b(),h.replace("/login")},[]),{isloading:f,error:d,sendRequest:N,resetError:w}=R(C),S=()=>{const a={url:H+"/userlogout",method:"DELETE",headers:{Authorization:"Bearer "+A}};N(a)};l.exports.useEffect(()=>{d&&(w(),b(),h.replace("/login"))},[d]);let o="Logout";return f&&(o="Logging Out"),!f&&!d&&(o="Logout"),r(k.Fragment,{children:[r("header",{className:n.header,children:[t("div",{className:n.hamburger,children:t(T,{"aria-label":"menu",color:"success",onClick:I,children:t(L,{})})}),t("div",{children:"Spend Analysis"}),t(B,{className:n.navbar,isUserLoggedIn:g,isUserAdmin:m,logoutHandler:S,buttonText:o})]}),U&&t(te,{hideSideBar:v,children:t(B,{className:n.sidebar,isUserLoggedIn:g,isUserAdmin:m,logoutHandler:S,buttonText:o,hideSideBar:v})})]})};export{ne as default};
