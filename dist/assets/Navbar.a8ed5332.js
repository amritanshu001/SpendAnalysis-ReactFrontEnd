import{j as i,a,N as s,B as M,R as B,u as y,b as c,r as l,c as E,d as H,e as j,f as R}from"./index.30f654d1.js";import{u as q}from"./useHTTP.95e3c505.js";import{r as w,i as D,a as T,I as $}from"./IconButton.be6bb1bd.js";import{B as z}from"./Backdrop.47d56946.js";import{u as O}from"./useDispatch.e7edbe39.js";const F="_header_94dak_1",P="_navbar_94dak_33",V="_sidebar_94dak_51",G="_hamburger_94dak_115",J="_active_94dak_179",K="_logout_94dak_187",n={header:F,navbar:P,sidebar:V,hamburger:G,active:J,logout:K},Q="_logout_pir4j_1",W={logout:Q},S=e=>{const r=()=>{e.logoutHandler(),"hideSideBar"in e&&e.hideSideBar()};return i("nav",{className:e.className,children:[i("ul",{children:[a("li",{children:a(s,{to:"/",onClick:e.hideSideBar,children:"Home"})}),!e.isUserLoggedIn&&a("li",{children:a(s,{to:"/login",onClick:e.hideSideBar,children:"Login"})}),e.isUserLoggedIn&&a("li",{children:a(s,{to:"/spendanalysis",onClick:e.hideSideBar,children:"Spend Analysis"})}),e.isUserLoggedIn&&a("li",{children:a(s,{to:"/manageaccount",onClick:e.hideSideBar,children:"Manage Accounts"})}),e.isUserLoggedIn&&a("li",{children:a(s,{to:"/uploadstatement",onClick:e.hideSideBar,children:"Upload Statement"})}),e.isUserLoggedIn&&e.isUserAdmin&&a("li",{children:a(s,{to:"/addbank",onClick:e.hideSideBar,children:"Add Bank Details"})})]}),e.isUserLoggedIn&&a(M,{className:W.logout,onClick:r,children:e.buttonText})]})};var u={},X=D.exports;Object.defineProperty(u,"__esModule",{value:!0});var L=u.default=void 0,Y=X(w()),Z=T,p=(0,Y.default)((0,Z.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");L=u.default=p;const ee={"sidebar-show":"_sidebar-show_wqr4l_1"},ae=e=>i(B.Fragment,{children:[a(z,{onClick:e.hideSideBar}),a("div",{className:ee["sidebar-show"],children:e.children})]}),ne=e=>{const r=O(),h=y(),g=c(t=>t.userAuth.userLoggedIn),A=c(t=>t.userAuth.authToken),m=c(t=>t.userAuth.userIsAdmin),[U,_]=l.exports.useState(!1),I=()=>{_(!0)},v=()=>{_(!1)},b=()=>{r(E.resetUserAccounts()),r(H.resetBanks()),r(j.logUserOut())},C=l.exports.useCallback(t=>{b(),h.replace("/login")},[]),{isloading:f,error:d,sendRequest:N,resetError:x}=q(C),k=()=>{const t={url:R+"/userlogout",method:"DELETE",headers:{Authorization:"Bearer "+A}};N(t)};l.exports.useEffect(()=>{d&&(x(),b(),h.replace("/login"))},[d]);let o="Logout";return f&&(o="Logging Out"),!f&&!d&&(o="Logout"),i(B.Fragment,{children:[i("header",{className:n.header,children:[a("div",{className:n.hamburger,children:a($,{"aria-label":"menu",color:"success",onClick:I,children:a(L,{})})}),a("div",{children:"Spend Analysis"}),a(S,{className:n.navbar,isUserLoggedIn:g,isUserAdmin:m,logoutHandler:k,buttonText:o})]}),U&&a(ae,{hideSideBar:v,children:a(S,{className:n.sidebar,isUserLoggedIn:g,isUserAdmin:m,logoutHandler:k,buttonText:o,hideSideBar:v})})]})};export{ne as default};
